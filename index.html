<!DOCTYPE html>
<html class="sl-theme-dark" lang="en">
  <head>
    <!-- initialize theme vars
    https://coolors.co/10002b-240046-3c096c-5a189a-7b2cbf-9d4edd-c77dff-e0aaff -->

    <!-- initialize externals -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src=" https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js "></script>
    
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.9.0/cdn/themes/dark.css" />
     <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.9.0/cdn/shoelace-autoloader.js"></script>
  
     <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "ocwa441dmy");
  </script>

    <!-- initialize my stuff -->
    <script src="/js/all.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/themes.js"></script>
    <script src="/js/randomquote.js"></script>
    <link rel="stylesheet" href="/themes.css" />
    <link rel="stylesheet" href="/style.css" />
    <script>
    fetch('https://api.github.com/repos/gogo6211/selenitenew/commits?per_page=3')
    .then(res => res.json())
    .then(res => {
      const messageElement = document.getElementById('message');
      messageElement.innerHTML = '';
      
      res.forEach(commit => {
        const codeBlock = document.createElement('commit');
        codeBlock.textContent = commit.commit.message;
        messageElement.appendChild(codeBlock);
      });
    })
    .catch(error => console.error('Error fetching commit messages:', error));
    </script>
    
    <!-- seo(yes i know i have noindex tags) + other things -->
    <title>Sodalite</title>
    <link rel="icon" href="/favicon.ico" />
    <meta name="robots" content="noindex, nofollow" />

  </head>
  <alerts>
    <sl-dialog label="Welcome to Sodalite" class="dialog-width" style="--width: 60vw;display:none;">
      Thank you for choosing Sodalite! You will be able to play over 230 high quality games, and we have many tools to make your experience better.
      <br>
      Wanting to transfer your data from another website? Try the transfer utility in the footer!
      <br>
      Learn more about Sodalite at the about page in the header!
      <br>
      Have a great day!
      <sl-button slot="footer" variant="neutral">Close</sl-button>
    </sl-dialog>
  </alerts>
  <body id="noscroll">
    <header>
      <a href="/index.html">Home</a>
      <a href="/bookmarklets.html">Bookmarklets</a>
      <a href="/projects.html">Games</a>
      <a href="/settings.html">Settings</a>
      <a href="https://piranha-a81.pages.dev/">Proxy</a>
      <a id="blank" href="#">Open Blank</a>
      <a href="/about.html">About</a>
    </header>
    <main id="main" class="noscroll">
      <h1>Sodalite</h1>
      <h3>Type "game" on <a href="https://lbhsmath.com">lbhsmath.com</a> and you will be redirected to the current unblocked Sodalite site.</h3>
      <div id="message">
        <commit>Loading...</commit>
      </div>
      <button id="history" onclick="window.location.href='https://github.com/gogo6211/selenitenew/commits/main/'">
        Version History
      </button>
      <p id="randomquote"></p>
    </main>

    <!-- Modal Container (added for popups) -->
    <div id="modalContainer"></div>
    
    <script>
      // Helper: Set cookie with expiration in hours
      function setCookie(name, value, hours) {
        const expires = hours ? "; expires=" + new Date(Date.now() + hours * 3600000).toUTCString() : "";
        document.cookie = name + "=" + (value || "") + expires + "; path=/";
      }
      
      // Helper: Get cookie by name
      function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
          let c = ca[i].trim();
          if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length);
        }
        return null;
      }
      
      // Check if any popup-related cookie exists; if not, show first popup.
      if (!getCookie("freshmanPopupSeen") && !getCookie("freshmanUser") && !getCookie("votedPopupFinal")) {
        askIfFreshman();
      }
      
      // First modal: Ask "Are you a freshman?" with a 3-second delay before buttons are enabled.
      function askIfFreshman() {
        const overlay = document.createElement("div");
        overlay.className = "overlay";
        document.body.appendChild(overlay);
      
        const modal = document.createElement("div");
        modal.className = "modal animate-modal";
        modal.style.textAlign = "center";
        modal.style.padding = "20px";
        modal.innerHTML = `
          <h3>Are you a freshman?</h3>
          <button id="yesFreshmanBtn" disabled style="padding: 10px 20px; margin: 5px;">Yes ‚úÖ</button>
          <button id="noFreshmanBtn" disabled style="padding: 10px 20px; margin: 5px;">No ‚ùå</button>
        `;
        document.getElementById("modalContainer").appendChild(modal);
      
        // Enable buttons after 3 seconds.
        setTimeout(() => {
          document.getElementById("yesFreshmanBtn").disabled = false;
          document.getElementById("noFreshmanBtn").disabled = false;
        }, 3000);
      
        // "No" option: store a cookie to avoid re-showing.
        document.getElementById("noFreshmanBtn").addEventListener("click", () => {
          setCookie("freshmanPopupSeen", "no", 7 * 24); // expires in 7 days
          modal.remove();
          overlay.remove();
        });
      
        // "Yes" option: store the "freshmanUser" cookie that expires in 5 months (approx. 3600 hours)
        document.getElementById("yesFreshmanBtn").addEventListener("click", () => {
          setCookie("freshmanUser", "yes", 3600); 
          modal.remove();
          overlay.remove();
          // Now show the vote-check popup.
          showVoteCheckPopup();
        });
      }
      
      // Second modal: Ask "Be fr did you vote?" with two normal-styled buttons (disabled for 3 seconds initially).
      // Top button: "nah" ; Bottom button: "Yes"
      function showVoteCheckPopup() {
        const overlay = document.createElement("div");
        overlay.className = "overlay";
        document.body.appendChild(overlay);
      
        const modal = document.createElement("div");
        modal.className = "modal animate-modal";
        modal.style.width = "400px";
        modal.style.maxWidth = "90vw";
        modal.style.borderRadius = "12px";
        modal.style.padding = "20px";
        modal.style.textAlign = "center";
        modal.style.background = "white";
        modal.style.boxShadow = "0 0 10px rgba(0,0,0,0.2)";
        modal.innerHTML = `
          <h3>Be fr, did you vote?</h3>
          <button id="voteNahBtn" disabled style="padding: 10px 20px; margin: 5px;">nah</button>
          <br/>
          <button id="voteYesBtn" disabled style="padding: 10px 20px; margin: 5px;">Yes</button>
        `;
        document.getElementById("modalContainer").appendChild(modal);
      
        // Enable buttons after 3 seconds.
        setTimeout(() => {
          document.getElementById("voteNahBtn").disabled = false;
          document.getElementById("voteYesBtn").disabled = false;
        }, 3000);
      
        // If user clicks "Yes" (they did vote), simply close the popup.
        document.getElementById("voteYesBtn").addEventListener("click", () => {
          // Optionally store a cookie that they have confirmed voting.
          setCookie("freshmanPopupSeen", "voted", 7 * 24); // adjust expiry if needed
          modal.remove();
          overlay.remove();
        });
      
        // If user clicks "nah" (they haven't voted), then show the final voting reminder popup.
        document.getElementById("voteNahBtn").addEventListener("click", () => {
          modal.remove();
          overlay.remove();
          showFinalPopup();
        });
      }
      
      // Final modal: A reminder popup with a 30-second countdown.
      // When finished, a cookie is stored for 2 weeks.
      function showFinalPopup() {
        const overlay = document.createElement("div");
        overlay.className = "overlay";
        document.body.appendChild(overlay);
      
        const modal = document.createElement("div");
        modal.className = "modal animate-modal";
        modal.style.width = "400px";
        modal.style.maxWidth = "90vw";
        modal.style.borderRadius = "12px";
        modal.style.padding = "20px";
        modal.style.textAlign = "center";
        modal.style.background = "white";
        modal.style.boxShadow = "0 0 10px rgba(0,0,0,0.2)";
        modal.innerHTML = `
          <h1>üéâ Last day to Vote üéâ</h1>
          <h2 style="margin-top: 10px;">It‚Äôs the last day to vote! Check your email from Mrs. Quigly or use the button below.</h2>
          <p style="font-style: italic; margin-top: 10px;">Already voted? Just wait 20 seconds.</p>
          <a href="https://mail.google.com/mail/u/0/#search/Current+freshmen+(Rising+Sophomores)" target="_blank">
            <button style="margin-top: 15px; padding: 10px 20px; font-size: 1rem;">üì¨ Open Email Search</button>
          </a>
          <br/>
          <button id="finishBtn" disabled style="margin-top: 20px; padding: 10px 20px; font-size: 1.1rem;">
            Finished (30s)
          </button>
        `;
        document.getElementById("modalContainer").appendChild(modal);
      
        let seconds = 30;
        const finishBtn = document.getElementById("finishBtn");
        const countdown = setInterval(() => {
          seconds--;
          finishBtn.innerText = `Finished (${seconds}s)`;
          if (seconds <= 0) {
            clearInterval(countdown);
            finishBtn.disabled = false;
            finishBtn.innerText = "Finished ‚úÖ";
            finishBtn.style.backgroundColor = "#28a745";
            finishBtn.style.color = "#fff";
            finishBtn.style.fontWeight = "bold";
          }
        }, 1000);
      
        finishBtn.addEventListener("click", () => {
          // Store a cookie that prevents the final popup for 2 weeks (14 days = 336 hours)
          setCookie("votedPopupFinal", "shown", 336);
          modal.remove();
          overlay.remove();
        });
      }
    </script>
    
    <footer class="noscroll">
      <a href="https://github.com/gogo6211/selenitenew">Source Code</a>
      <a id="panicmode">Panic Mode</a>
      <a href="/transfer.html">Transfer your data</a>
      <a href="/suggest.html">Bug Reports</a>
      <a href="/suggest.html">Suggestions</a>
      <a href="/contact.html">Contact</a>
    </footer>
  </body>
</html>
