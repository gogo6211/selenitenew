<!DOCTYPE html>
<html class="sl-theme-dark">
<head>
    <!-- Keep existing head content -->
    <script type="module">
        import { setBasePath } from 'https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.9.0/dist/utilities/base-path.js';
        import 'https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.9.0/dist/components/code-block/code-block.js';
        import 'https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.9.0/dist/components/alert/alert.js';
        import 'https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.9.0/dist/components/icon/icon.js';
        import 'https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.9.0/dist/components/tag/tag.js';

        setBasePath('https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.9.0/dist');

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const slug = window.location.pathname.split('/blog/')[1].split('/')[0];
                const response = await fetch(`/blog/${slug}/content.html`);
                const content = await response.text();
                
                // Parse content
                const parser = new DOMParser();
                const doc = parser.parseFromString(content, 'text/html');
                
                // Extract metadata
                const metaScript = doc.querySelector('script[type="application/article-meta"]');
                const meta = JSON.parse(metaScript.textContent);
                
                // Build article
                document.getElementById('article-container').innerHTML = `
                    ${doc.getElementById('article-content').innerHTML}
                    ${doc.querySelector('style')?.outerHTML || ''}
                `;

                // Update metadata
                document.title = `${meta.title} | Sodalite`;
                
                // Initialize components
                await customElements.whenDefined('sl-code-block');
                Prism.highlightAll();

            } catch (error) {
                document.getElementById('article-container').innerHTML = `
                    <sl-alert variant="danger" open>
                        <sl-icon slot="icon" name="exclamation-octagon"></sl-icon>
                        Error loading article: ${error.message}
                    </sl-alert>
                `;
            }
        });
    </script>
</head>
<body>
    <!-- Keep existing header/main/footer structure -->
    <main>
        <a href="/blog.html" class="back-button"><sl-icon name="arrow-left"></sl-icon> Back</a>
        <div id="article-container"></div>
    </main>
</body>
</html>